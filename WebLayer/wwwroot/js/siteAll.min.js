function handleAjaxModal(){console.log("((handleAjaxModal))");$("a[data-modal]").unbind("click");handleLoadingOnLinks();$.ajaxSetup({cache:!1});$("a[data-modal]").on("click",function(){var n=$(this).data("modal");return modalBsContent.load(this.href,function(t,i,r){switch(i){case"success":modalBs.modal({backdrop:"static",keyboard:!1},"show");n=="modal-lg"?modalBs.find(".modal-dialog").addClass("modal-lg"):n=="modal-xl"?modalBs.find(".modal-dialog").addClass("modal-xl"):(modalBs.find(".modal-dialog").removeClass("modal-lg"),modalBs.find(".modal-dialog").removeClass("modal-xl"));handleLoadingOnLinks();handleEnablePlaceholder();try{onModalInit()}catch(f){}break;case"error":var u="Error de ejecución: "+r.status+" "+r.statusText;r.status==403?$.msgbox(t,{type:"error"}):$.msgbox(u,{type:"error"})}}),!1})}function handleModalForm(n,t){n.find("form").submit(function(){return $.ajax({url:this.action,type:this.method,data:$(this).serialize(),success:function(n){t(n)},error:function(n,t,i){var r="Error de ejecución: "+t+" "+i;$.msgbox(r,{type:"error"});console.log("Error: ")}}),!1})}function handleAjaxForm(n,t){n.submit(function(){return $.ajax({url:this.action,type:this.method,data:$(this).serialize(),success:function(n){t(n)},error:function(n,t,i){var r="Error de ejecución: "+t+" "+i;$.msgbox(r,{type:"error"});console.log(r)}}),!1})}function handleIgnoreAccents(n){var u=n.sender.dataSource.data(),t=this.options.dataTextField,i,r,f;for(r in u)if(!isNaN(r)){if(i=u[r],i[t+"Filter"]!=null)break;i[t+"Filter"]=ignoreAccents(i[t].toLowerCase())}f=t+"Filter";n.sender.dataSource.filter({field:f,operator:this.options.filter,value:ignoreAccents(n.filter.value.toLowerCase())});n.preventDefault()}function handleAjaxUploadForm(n,t,i){document.getElementById(n).addEventListener("submit",function(n){var u=n.target,r;t.data("kendoValidator").validate()&&u.getAttribute("enctype")==="multipart/form-data"&&u.dataset.ajax&&(n.preventDefault(),n.stopImmediatePropagation(),r=new XMLHttpRequest,r.open(u.method,u.action),r.onreadystatechange=function(){r.readyState===4&&r.status===200&&i(jQuery.parseJSON(r.response))},r.send(new FormData(u)))},!0)}function handlePixelAdmin(){init.push(function(){});window.PixelAdmin.start(init)}function handleKendoCulture(){console.log("((handleKendoCulture))");kendo.culture("es");var n=$("span.k-pager-info.k-label").text();n=="No items to display"&&$("span.k-pager-info.k-label").text("No hay registros")}function handleLoadingOnLinks(){console.log("((handleLoadingOnLinks))");$("#content-wrapper a").not(".disable-loading").click(function(n){var t=$(this).attr("href"),i=$(this).attr("target")==null?null:$(this).attr("target").toLowerCase(),r=$(this).hasClass("btn")||$(this).hasClass("k-button");t!="#"&&t!=""&&t!=null&&r&&!n.ctrlKey&&i==null&&i!="_blank"&&i!="blank"&&$(this).button("loading")});$(".navigation").not(".dropdown-second-menu").find("li").not(".mm-dropdown").click(function(){var n,t;window.isMenuItemClicked||(event.preventDefault(),n=$(this).find("a").attr("href"),n!="#"&&($(".navigation li").not(".mm-dropdown").removeClass("active"),$(this).addClass("active"),window.isMenuItemClicked=!0,t=setInterval(function(){window.location.href=n;clearInterval(t)},80)))})}function handleLoader(){$("#loader").addClass("animated fadeOut");$("#loader").one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){$(this).hide();$("body").css("overflow-x","auto")})}function handlePace(){Pace.on("done",function(){handleAjaxModal();var n=setInterval(function(){$("#loader").hide();clearInterval(n)},5e3)});Pace.options.ajax.trackWebSockets=!1}function handleTimeouts(){updateIdleTimer();$(document).ajaxStart(updateIdleTimer);$(document).ajaxStop(updateIdleTimer);$(document).ajaxError(updateIdleTimer);var t=window.sessionTimeout*6e4,n=t-window.loginTimeElapsedinMills,i=setInterval(function(){n>0&&!isNaN(n)?window.location.href="/Account/LogOff":clearInterval(i)},n)}function updateIdleTimer(){console.log("((updateIdleTimer))");idleTimer!=null&&(clearInterval(idleTimer),clearInterval(idleCountdownTimer));var n=6e4,t=window.idleTimeout*n-n;idleTimer=setInterval(function(){if(!isNaN(t))notificationDesktop.show({message:"Su sesión esta proxima a vencer ya que no registra actividad"}),console.log("idleDelay:"+t),idleCountdownTimer=setInterval(function(){window.location.href="/Account/LogOff/?SessionClosed=True"},n);clearInterval(idleTimer)},t)}function handleNotificationHub(){notificationHub=$.connection.notificationHub;notificationHub.client.show=function(t){var i=t.Type==0?"error":t.Type==1?"success":t.Type==2?"info":t.Type==3?"warn":t.Type==4?"modal":t.Type==5?"inbox":"";switch(i){case"error":case"success":case"info":case"warn":notification.show({message:t.Message},i);break;case"modal":Utils.showModalBs(t.ModalUrl,"",t.ModalParams);break;case"inbox":n()}t.ShowMessageInDesktop&&t.Message!=null&&(t.ShowIconInDesktop?(i=i=="modal"?"":i,notificationDesktop.show({message:t.Message},i)):notificationDesktop.show({message:t.Message}))};$.connection.hub.start().done(function(){console.log("((Connected signal hub))")});$.connection.hub.disconnected(function(){console.log("((Disconnected signal hub))");$.connection.hub.lastError&&console.log("Disconnected. Reason: "+$.connection.hub.lastError.message)});notificationHub.client.notifyUserBlocked=function(){};var n=function(){console.log("((GetCountNewInboxNotifications))");$.ajax({type:"POST",url:"/Notification/GetCountNewInboxNotifications/",dataType:"json",success:function(n){n.Success&&(n.Result?$("#main-navbar #notificationsCount").text(n.Result):$("#main-navbar #notificationsCount").text(""))},failure:function(n){console.warn(n.responseText)},error:function(n){console.error(n.responseText)}})},t=function(t){var i,r;console.log("((GetLastInboxNotifications))");switch(t){case"VIEW_ALL":i=50;break;default:r=$("#main-navbar #notificationsCount");i=r.text()==""?0:r.text()}$.ajax({type:"POST",data:{count:i},url:"/Notification/GetListInboxNotifications/",dataType:"json",success:function(t){if(t.Success){n();var i=$("#main-navbar #notificationListTemplate").html(),r=kendo.template(i);$("#main-navbar #notificationList").html(kendo.render(r,t.Result))}},failure:function(n){console.warn(n.responseText)},error:function(n){console.error(n.responseText)}})};setTimeout(function(){n()},500);$("#main-navbar #notificationInboxBtn").on("click",function(){t()});$("#main-navbar #notificationsViewAllBtn").on("click",function(){t("VIEW_ALL")});$("#main-navbar .widget-notifications").on("click",function(n){n.stopPropagation()})}function handleEnablePlaceholder(){console.log("((handleEnablePlaceholder))");$("form :input[enable-placeholder]").each(function(n,t){var i=$(t).attr("id"),r=null;i&&(r=$(t).parents("form").find("label[for="+i+"]")).length==1&&$(t).attr("placeholder","Ingrese "+$(r).text().toLowerCase())});$("form[enable-placeholder] :input").each(function(n,t){var r=$(t).attr("id"),u=null,i=$(t).attr("placeholder");r&&(u=$(t).parents("form").find("label[for="+r+"]")).length==1&&(typeof i=="undefined"||i==!1||i==null)&&$(t).attr("placeholder","Ingrese "+$(u).text().toLowerCase())})}function handlePreventMultipleTabs(){if(console.log("((handlePreventMultipleTabs))"),localStorage.getItem("_tabInstance")===null)localStorage.setItem("_tabInstance",!0),window.onunload=function(){localStorage.removeItem("_tabInstance")};else{alert("No esta permitido el uso de múltiples tabs o ventanas en los módulos de Historia Clínica, esta restricción es temporal y lamentamos los inconvenientes que esto pueda causarle.");var n=window.open("about:blank","_self");n.close()}}function handleLocalStorage(){localStorage.clear()}function initParticles(){particlesJS("particles-js",{particles:{number:{value:2,density:{enable:!0,value_area:80}},color:{value:["#ffffff","#bb73f9","#76cffb"]},shape:{type:"circle",stroke:{width:0,color:"#000000"},polygon:{nb_sides:5}},opacity:{value:.1,random:!0,anim:{enable:!1,speed:1,opacity_min:.1,sync:!1}},size:{value:250,random:!0,anim:{enable:!1,speed:40,size_min:.1,sync:!0}},line_linked:{enable:!1},move:{enable:!0,speed:.5,direction:"none",random:!0,straight:!1,out_mode:"out",bounce:!1,attract:{enable:!1,rotateX:600,rotateY:1200}}},interactivity:{detect_on:"canvas",events:{onhover:{enable:!1,mode:"repulse"},onclick:{enable:!1,mode:"push"},onresize:{enable:!0,density_auto:!0,density_area:80}},modes:{grab:{distance:140,line_linked:{opacity:1}},bubble:{distance:400,size:40,duration:2,opacity:8,speed:3},repulse:{distance:200,duration:.4},push:{particles_nb:4},remove:{particles_nb:2}}},retina_detect:!0})}function getCookie(n){for(var t,r=n+"=",u=document.cookie.split(";"),i=0;i<u.length;i++){for(t=u[i];t.charAt(0)==" ";)t=t.substring(1,t.length);if(t.indexOf(r)==0)return t.substring(r.length,t.length)}return null}function toBase64Decode(n){var r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",t="",o,s,h,c,f,u,e,i=0;do c=r.indexOf(n.charAt(i++)),f=r.indexOf(n.charAt(i++)),u=r.indexOf(n.charAt(i++)),e=r.indexOf(n.charAt(i++)),o=c<<2|f>>4,s=(f&15)<<4|u>>2,h=(u&3)<<6|e,t=t+String.fromCharCode(o),u!=64&&(t=t+String.fromCharCode(s)),e!=64&&(t=t+String.fromCharCode(h));while(i<n.length);return t}function handlePixelAdminMenuExtended_Pre(){console.log("((handlePixelAdminMenuExtended_Pre))");var h=function(n,t){return n===t},c=function(n,t){return(" "+n.className+" ").indexOf(" "+t+" ")>-1},n,i,r,u,e,o,t,s,f;for(o=(document.location+"").replace(/\#.*?$/,""),e=h,u=$("#main-menu .navigation"),u.find("li").removeClass("open active"),r=u[0].getElementsByTagName("a"),i=function(){return function(n){return n.className+=" active",c(n.parentNode,"navigation")?void 0:(n=n.parentNode.parentNode,n.className+=" open",i(n))}}(this),f=[],t=0,s=r.length;t<s;t++)if(n=r[t],n.href.indexOf("#")===-1&&e(n.href,o)){i(n.parentNode);break}else f.push(void 0);return f}function handleKendoDateFormat_Pre(){console.log("((handleKendoDateFormat_Pre))");kendo.ui.DatePicker.prototype.options.format="dd/MM/yyyy";kendo.ui.DateTimePicker.prototype.options.format="dd/MM/yyyy HH:mm";kendo.ui.DatePicker.fn.options.format="dd/MM/yyyy";kendo.ui.DateTimePicker.fn.options.format="dd/MM/yyyy HH:mm"}function handleKendoStringAndDateFilter_Pre(){var t,u,r,n,i,f;console.log("((handleKendoStringAndDateFilter_Pre))");t=kendo.ui.FilterMenu.prototype.options.operators.string;u={startswith:"Starts with"};kendo.ui.FilterMenu.prototype.options.operators.string=$.extend({},u,t);i=kendo.ui.FilterMenu.prototype.options.operators.date;r={gte:"Is after or equal to"};kendo.ui.FilterMenu.prototype.options.operators.date=$.extend({},r,i);n=kendo.ui.FilterCell.prototype.options;n.minLength=50;t=n.operators.string;n.operators.string=$.extend({},u,t);n.messages.isFalse="F";n.messages.isTrue="T";i=n.operators.date;n.operators.date=$.extend({},r,i);f=n.operators.number;n.operators.number=$.extend({},r,f)}function handleDateTimeColumnFilter_Pre(n){console.log("((handleDateTimeColumnFilter_Pre))");n.element.kendoDateTimePicker()}function handleOnGridFilterInit(n){var r=n.sender.dataSource.options.schema.model.fields[n.field].type,t,i;r=="date"&&(t=n.container.find("[data-role=dropdownlist]:eq(0)").data("kendoDropDownList"),t.value("gte"),t.trigger("change"),i=n.container.find("[data-role=dropdownlist]:eq(2)").data("kendoDropDownList"),i.value("lte"),i.trigger("change"))}function handleKendoCulture_Pre(){console.log("((handleKendoCulture_Pre))");kendo.culture("es")}var modalBs=$("#modalBs"),modalBsContent=$("#modalBs").find(".modal-content"),notification,idleTimer,idleCountdownTimer,notificationHub,notificationDesktop,ignoreAccents,Utils,User;$.fn.extend({animateCss:function(n){$(this).addClass("animated "+n).one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){$(this).removeClass("animated "+n)})}});notificationDesktop=function(){"use strict";return{show:function(n,t){var i,u="SALUD.SIS",r,f;switch(t){case"warn":i="/Content/images/alert_48.png";break;case"info":i="/Content/images/info-48.png";break;case"error":i="/Content/images/cancel_48.png";break;case"success":i="/Content/images/accepted_48.png";break;case"inbox":i="/Content/images/msg_notification_icon_64.png";break;default:i="/Content/images/logo-min.png"}r={body:n.message,dir:"auto",icon:i};"Notification"in window?Notification.permission==="granted"?f=new Notification(u,r):Notification.permission!=="denied"&&Notification.requestPermission(function(n){if("permission"in Notification||(Notification.permission=n),n==="granted")var t=new Notification(u,r)}):console.log("This browser does not support desktop notification")}}}();var handleUserSettings=function(){"use strict";console.log("((handleUserSettings))");typeof Storage!="undefined"?typeof permissions!="undefined"&&(localStorage.removeItem("permissions"),localStorage.permissions=JSON.stringify(window.permissions)):console.log("Browser does not support storage")},handleNotifications=function(){notification=$("#notification").data("kendoNotification")},handleConfigRequestVerificationToken=function(){try{window.RequestVerificationToken=$("input[name=__RequestVerificationToken]").val()}catch(n){}},handleAjaxGlobalEvents=function(){console.log("((handleAjaxGlobalEvents))");$.fn.button.Constructor.DEFAULTS.loadingText="Cargando...";$(document).ajaxStart(function(n){try{var t=$(n.target.activeElement),i=t.hasClass("btn")||t.hasClass("k-button")||t.hasClass("signin-btn"),r=t.hasClass("disable-loading");if(document.body.style.cursor="wait",!i||r)return;t.button("loading")}catch(u){console.log(u)}});$(document).ajaxStop(function(){try{$(document).find(".btn").not(".k-upload-button").button("reset");$(document).find(".k-button").not(".k-upload-button").button("reset");$(document).find(".signin-btn").not(".k-upload-button").button("reset");document.body.style.cursor="default"}catch(n){console.log(n)}});$(document).ajaxError(function(n,t,i){$(document).find(".btn").not(".k-upload-button").button("reset");$(document).find(".k-button").not(".k-upload-button").button("reset");$(document).find(".signin-btn").not(".k-upload-button").button("reset");document.body.style.cursor="default";t.statusText!=undefined&&t.status==400?notification.show({message:t.statusText},"error"):t.status==403?notification.show({message:"Acceso no autorizado a: <i><small>"+i.url+"<\/i><\/small>"},"error"):t.status==404?notification.show({message:"Recurso no encontrado "},"error"):t.status==500?notification.show({message:"No fue posible realizar el proceso solicitado"},"error"):console.warn("No fue posible realizar el proceso solicitado")});$(document).ajaxComplete(function(){$(document).find(".btn").not(".k-upload-button").button("reset");$(document).find(".k-button").not(".k-upload-button").button("reset");$(document).find(".signin-btn").not(".k-upload-button").button("reset");document.body.style.cursor="default"})};var Area=function(){"use strict";return{init:function(){handleKendoCulture();handleNotifications();handleConfigRequestVerificationToken();handleAjaxGlobalEvents();handleLoader();handleAjaxModal();handleTimeouts();handleEnablePlaceholder()}}}(),Login=function(){"use strict";return{init:function(){handleKendoCulture();handleAjaxGlobalEvents();handleLocalStorage();initParticles()}}}(),Cpanel=function(){"use strict";return{init:function(){handleUserSettings();handleTimeouts();handleAjaxModal();handleNotifications();handleNotificationHub();handleAjaxGlobalEvents();this.enableAjaxCache()},enableAjaxCache:function(){$.ajaxSetup({cache:!0})}}}();$.fn.serializeObject=function(){var n={},t=this.serializeArray();return $.each(t,function(){n[this.name]!==undefined?(n[this.name].push||(n[this.name]=[n[this.name]]),n[this.name].push(this.value||"")):n[this.name]=this.value||""}),n};ignoreAccents=function(){var n={"à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","ç":"c","è":"e","é":"e","ê":"e","ë":"e","ì":"i","í":"i","î":"i","ï":"i","ñ":"n","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","ß":"s","ù":"u","ú":"u","û":"u","ü":"u","ÿ":"y"};return function(t){var r,i;if(!t)return"";for(r="",i=0;i<t.length;i++)r+=n[t.charAt(i)]||t.charAt(i);return r}}();Utils=function(){"use strict";return{addGridDataItem:function(n,t){var i=$(n).data("kendoGrid");i.dataSource.add(t)},removeGridDataItem:function(n,t){n.preventDefault();var i=$(t).data("kendoGrid"),r=i.dataItem($(n.currentTarget).closest("tr"));i.dataSource.remove(r)},getGridDataSource:function(n){var t=$(n).data("kendoGrid");return jQuery.parseJSON(JSON.stringify(t.dataSource.data()))},setGridDataSource:function(n,t){var i=$(n).data("kendoGrid");i.dataSource.data(t)},showJasperReport:function(n){var r=$.param(n.params),t=JSON.parse(toBase64Decode(getCookie("jasperServerClient"))),u=t.Environment,i=t.ServerUrl+"/flow.html?_flowId=viewReportFlow&reportUnit="+u+n.resource+"&decorate=no&j_username="+t.Username+"&j_password="+t.Password+"&userLocale=es_CO&"+r,f='<object data="'+i+'" width="'+n.width+'" height="'+n.height+'"><embed src="'+i+'" width="'+n.width+'" height="'+n.height+'"><\/embed> Error: Embedded data could not be displayed.<\/object>';$(n.container).html(f)},showJasperDashboard:function(n){var f=$.param(n.params),t=JSON.parse(toBase64Decode(getCookie("jasperServerClient"))),r=t.Environment,i=t.ServerUrl+"/dashboard/viewer.html?decorate=no&j_username="+t.Username+"&j_password="+t.Password+"&userLocale=es_CO#"+r+n.resource,u='<object data="'+i+'" width="'+n.width+'" height="'+n.height+'"><embed src="'+i+'" width="'+n.width+'" height="'+n.height+'"><\/embed> Error: Embedded data could not be displayed.<\/object>';$(n.container).html(u)},showModalBs:function(n,t,i){t=typeof t!="undefined"?t:"";i=typeof i!="undefined"&&i!=null?"?"+$.param(i):"";modalBsContent.load(n+i,function(n,i,r){switch(i){case"success":modalBs.modal({backdrop:"static",keyboard:!1},"show");t=="modal-lg"?modalBs.find(".modal-dialog").addClass("modal-lg"):modalBs.find(".modal-dialog").removeClass("modal-lg");handleLoadingOnLinks();handleEnablePlaceholder();try{onModalInit()}catch(f){}break;case"error":var u="Error de ejecución: "+r.status+" "+r.statusText;r.status==403?$.msgbox(n,{type:"error"}):$.msgbox(u,{type:"error"})}})},addSectionToContainer:function(n,t,i){n.facade[t]=i},isValidSections:function(n,t){var i,r,u;for(i in n)if($.inArray(i,t)>=0&&(r=n[i],u=r.validateForm(),!u))return!1;return!0},getDataSections:function(n,t){var u={},r,i;for(r in n)$.inArray(r,t)>=0&&(i=n[r],i.form.submit(),u[r]={SectionId:i.sectionId,Model:i.model,DataForm:JSON.stringify(i.dataForm)});return{Sections:u}},setMenuItemPixelAdminByUrl:function(n){var e=function(n,t){return(" "+n.className+" ").indexOf(" "+t+" ")>-1},u=function(){return function(n){return n.className+=" active",e(n.parentNode,"navigation")?void 0:(n=n.parentNode.parentNode,n.className+=" open",u(n))}}(this),f=$("#main-menu .navigation"),i,t,r;for(f.find("li").removeClass("open active"),i=f[0].getElementsByTagName("a"),t=0;t<i.length;t++)if(r=i[t],r.href.replace(document.location.origin,"").toLowerCase().search(n.toLowerCase())>=0){setTimeout(function(){u(r.parentNode)},200);break}}}}();User=function(){"use strict";return{getListPermissions:function(){return typeof sessionStorage.getItem("permissions")!="undefined"?JSON.parse(localStorage.permissions):[]},hasPermission:function(n){if(typeof sessionStorage.getItem("permissions")!="undefined"){var t=JSON.parse(localStorage.permissions),u=n.split(","),i,r;for(i in t)if(r=t[i],$.inArray(r.Code,u)!=-1)return!0;return!1}return!1}}}();